#
# Copyright (C) 2010-2012 Andrei Pozolotin <Andrei.Pozolotin@gmail.com>
#
# All rights reserved. Licensed under the OSI BSD License.
#
# http://www.opensource.org/licenses/bsd-license.php
#

#
# hocon syntax : https://github.com/typesafehub/config/blob/master/HOCON.md
#

{

	#
	# plug-in home coordinates
	#
	plugin-name = "CarrotGarden AWS S3 Publish Plugin"
	plugin-link = "https://github.com/carrot-garden/carrot-nexus/blob/master/carrot-nexus-aws-s3-publish-plugin/readme.md"

	#
	# amazon service tuning
	#
	amazon-provider {
	
		throttle-exceptions = true
		throttle-expiration = 100s
		
		#
		# http://aws.amazon.com/s3/pricing/
		#
		cost {
			get-request = 0.000001  # $0.01 per 10,000 requests
			put-request = 0.00001   # $0.01 per  1,000 requests
			gigabyte-storage = 0.095 # $0.095 per GB
		}
	
	}

	#
	# scanner task tunint
	#
	scanner-task {
		
		failure-sleep-time = 1s
		repository-sleep-time = 1s
		
	}

	#
	# plug-in configuration form header
	# 
	form-header {
		#
		label=${plugin-name}
		#
		help-text="Documentation : <a target='_blank' href='"${plugin-link}'">"${plugin-name}"</a>"
	}

	#
	# plug-in configuration form "status" footer
	#
	form-footer {
	
		help-text="You can enable status page here by selecting ["${form-field-bundle.enable-status.label}"] above."
	
	}

	#
	# plug-in configuration form fields 
	# note: field order is set implicitly by position in this file
	# 
	form-field-bundle {
	
		# a.k.a "aws key id"
		aws-access {
			type="string"
			default-value="unknown"
			label="AWS Access Key ID"
			help-link="http://docs.amazonwebservices.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html"
			help-text="Access Key ID—Your Access Key ID identifies you as the party responsible for service requests. You include it in each request, so it's not a secret."
		}
		
		# a.k.a "aws secret key"
		aws-secret {
			type="string"
			default-value="unknown"
			label="AWS Secret Access Key"
			help-link="http://docs.amazonwebservices.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html"
			help-text="Secret Access Key—Each Access Key ID has a Secret Access Key associated with it. This key is just a long string of characters (and not a file) that you use to calculate the digital signature that you include in the request. Your Secret Access Key is a secret, and only you and AWS should have it."
		}

		# 		
		endpoint {
			type="string"
			default-value="https://s3.amazonaws.com"
			label="AWS S3 Service Endpoint"
			help-link="http://docs.amazonwebservices.com/general/latest/gr/rande.html#s3_region"
			help-text="An endpoint is a URL that is the entry point for a web service. Each product's region is entirely independent. If you create a resource (e.g., an instance, bucket, or queue) in one region, that resource is completely independent from any like resource in another region. The default region is us-east-1. The default regions are used when you access a resource by using an endpoint that does not specify a region, such as https://ec2.amazonaws.com."
		}
		
		bucket {
			type="string"
			default-value="maven-tester"
			label="AWS S3 Repository Bucket"
			help-link="http://aws.amazon.com/s3/"
			help-text="Amazon maven repository s3 bucket name; must exist and be accessible with provided credentials."
		}
		
		enable-scanner {
			type="checkbox"
			default-value="true"
			label="Scanner Task"
			help-link=${plugin-link}
			help-text="Enable repository background scanner and publisher tasks."
		}

		scanner-schedule {
			type="string"
			default-value="0 0/5 * * * ?"
			label="Scanner Task Schedule"
			help-link=${plugin-link}
			help-text="Provide 'cron' expression for the scanner task. Plugin will manage 2 tasks. First - manual, which will also run on nexus start. Second - scheduled, using provided pattern."
		}
		
		health-period {
			type="number"
			default-value="100"
			label="Health Check Period"
			help-link=${plugin-link}
			help-text="Frequency of health checks against amazon s3 service, in SECONDS. Health check verifies if configured amazon bucket is accessible with provided credentials."
		}
		
		enable-email {
			type="checkbox"
			default-value="false"
			label="Email Notification"
			help-link="http://www.sonatype.com/books/nexus-book/reference/configxn-sect-customizing-server.html"
			help-text="Enable email notifications for plug-in health events."
		}

		email-address {
			type="string"
			default-value="admin@example.com"
			label="Email Notification Address"
			help-link="http://www.sonatype.com/books/nexus-book"
			help-text="Email address for plug-in health event notifications."
		}
		
#		enable-feeds {
#			type="checkbox"
#			default-value="true"
#			label="Enable System Feeds"
#			help-link="http://www.sonatype.com/books/nexus-book/reference/using-sect-feeds.html"
#			help-text="Nexus provides feeds that capture system events, you can browse these feeds by clicking on System Feeds under the View menu."
#		}

		combo-id {
			type="repo-or-group"
			default-value="*"
			label="Publish Repository or Group"
			help-link="http://www.sonatype.com/books/nexus-book/reference/config-sect-repo-group.html"
			help-text="Select one repository, repository group, or all repositories which should be published to the amazon bucket."
		}
		
		publish-releases {
			type="checkbox"
			default-value="true"
			label="Publish Releases"
			help-link="http://www.sonatype.com/books/nexus-book/"
			help-text="Enable RELEASE artifacts publishing in amazon bucket."
		}
		
		publish-snapshots {
			type="checkbox"
			default-value="false"
			label="Publish Snapshots"
			help-link="http://www.sonatype.com/books/nexus-book/"
			help-text="Enable SNAPSHOT artifacts publishing in amazon bucket."
		}
		
		enable-exclude {
			type="checkbox"
			default-value="true"
			label="Path Exclusion"
			help-link=${plugin-link}
			help-text="Activate regular expression path exclusion pattern."
		}

		exclude-pattern {
			type="string"
			default-value="(/\\..*)|(/archetype-catalog.xml)"
			label="Path Exclusion Pattern"
			help-link=${plugin-link}
			help-text="Regular expression for maven artifact path patterns to be excluded from amazon publication. Normally you want to exclude nexus system folders and files, such as '/.nexus', '/.meta', '/archetype-catalog.xml', etc."
		}

		enable-status {
			type="checkbox"
			default-value="false"
			label="Enable Status Page"
			help-link=${plugin-link}
			help-text="Enable extended technical plug-in status page in section below."
		}
		
	}
	
	# default / fallback field values
	form-field-default {
			type="string"
			required=false
			default-value="default"
			valid-regex=""
			label="Default Form Field"
			help-link=${plugin-link}
			help-text="default help text"
	}
	
}
